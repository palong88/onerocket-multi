
   <%= javascript_include_tag "https://js.stripe.com/v2/" %>
   <%= form_tag "/subscriptions/update_card_details", id: "payment-form" do %>
  
	    <span class="payment-errors"></span>

	  
			<div class = "col s6 ">

					<div class="form-row">




					   <label>
					
						    <input type="text" size="20" data-stripe="number" placeholder= "Card Number">
						 </label>
						  </div>

					 </div>
					 <div class = "col s12 ">
				     <div class = "col s12 ">
								  <div class="form-row">

									  	<div class = "col s3 ">
									    	<label>
									     
									      <input type="text" size="2" data-stripe="exp_month" placeholder="MM">
									      </label>

									    </div>

									    <div class = "col s3 ">
									    	<label>
									    		
									    	<input type="text" size="2" data-stripe="exp_year" placeholder="YY">
									    	</label>
									    </div>
								  </div>
							  </div>
							</div>
						  <div class = "col s1">
							  <div class="form-row" >
							    <label>

							      
							      <input type="text" size="4" data-stripe="cvc" placeholder="CVC">
							    </label>
							  </div>
						  </div>
						  
            <div class="form-row" >

						  <input type="submit" class="submit" value="Update Details"></input>
						 </div>
				<% end %>


<script type="text/javascript">
			  Stripe.setPublishableKey('pk_test_vDSiuOkeTaV8mLnuOgqAQyWd');


			   $(document).ready(function() {
    $('select').material_select();
  });
           
				
			  Stripe.setPublishableKey('pk_test_vDSiuOkeTaV8mLnuOgqAQyWd');
			  $(function() {
  var $form = $('#payment-form');
  $form.submit(function(event) {
    // Disable the submit button to prevent repeated clicks:
    $form.find('.submit').prop('disabled', true);

    // Request a token from Stripe:
    Stripe.card.createToken($form, stripeResponseHandler);

    // Prevent the form from being submitted:
    return false;
  });

  function stripeResponseHandler(status, response) {
  // Grab the form:
  var $form = $('#payment-form');

  if (response.error) { // Problem!

    // Show the errors on the form:
    $form.find('.payment-errors').text(response.error.message);
    $form.find('.submit').prop('disabled', false); // Re-enable submission

  } else { // Token was created!

    // Get the token ID:
    var token = response.id;

    // Insert the token ID into the form so it gets submitted to the server:
    $form.append($('<input type="hidden" name="stripeToken">').val(token));

    // Submit the form:
    $form.get(0).submit();
  }
};
});
			  
           
			</script>
		


		
